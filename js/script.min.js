document.addEventListener("DOMContentLoaded",()=>{initPortfolio()});function initPortfolio(){const e={spinner:new LoadingSpinner,navbar:new NavbarHandler,lazyLoader:new LazyLoader};e.spinner.init(),e.navbar.init(),e.lazyLoader.init(),setupInteractions(),document.querySelector(".skills-section")&&initSkillsPage(),window.performance&&console.info(`Portfolio initialized in ${Math.round(performance.now())}ms`)}function initSkillsPage(){const e={skills:new SkillBarsAnimation,timeline:new TimelineAnimation};e.skills.init(),e.timeline.init(),setupSmoothScrolling(),updateActiveNavigation()}class LoadingSpinner{constructor(){this.spinner=null,this.isVisible=!1}init(){this.createSpinner(),this.show(),window.addEventListener("load",()=>this.hide()),setTimeout(()=>this.hide(),5e3)}createSpinner(){return this.spinner=document.getElementById("loading-spinner"),this.spinner||(this.spinner=document.createElement("div"),this.spinner.id="loading-spinner",this.spinner.innerHTML='\n        <div class="spinner-overlay">\n          <div class="spinner-container">\n            <div class="spinner"></div>\n            <p>Loading...</p>\n          </div>\n        </div>\n      ',document.body.appendChild(this.spinner)),this.spinner}show(){this.spinner&&(this.spinner.style.display="block",this.isVisible=!0)}hide(){this.spinner&&this.isVisible&&(this.spinner.style.opacity="0",setTimeout(()=>{this.spinner.style.display="none",this.isVisible=!1},300))}}class NavbarHandler{constructor(){this.navbar=document.getElementById("navbar"),this.lastScrollTop=0,this.scrollThreshold=100,this.isScrolling=!1}init(){this.navbar&&(window.addEventListener("scroll",this.handleScroll.bind(this),{passive:!0}),window.addEventListener("resize",()=>{this.isScrolling||this.updateNavbarPosition()}))}handleScroll(){this.isScrolling||(window.requestAnimationFrame(()=>{this.updateNavbarPosition(),this.isScrolling=!1}),this.isScrolling=!0)}updateNavbarPosition(){const e=window.scrollY||document.documentElement.scrollTop;e>this.lastScrollTop&&e>this.scrollThreshold?this.navbar.classList.add("hidden"):this.navbar.classList.remove("hidden"),this.lastScrollTop=e}}class LazyLoader{constructor(){this.lazyMediaElements=[],this.observerConfig={rootMargin:"200px 0px",threshold:.01},this.supportsIntersectionObserver="IntersectionObserver"in window}init(){if(this.lazyMediaElements=[...document.querySelectorAll(".lazy-loading"),...document.querySelectorAll("[data-src]"),...document.querySelectorAll("[data-srcset]")],0!==this.lazyMediaElements.length)if(this.supportsIntersectionObserver)this.setupIntersectionObserver();else this.loadAllMedia()}setupIntersectionObserver(){const e=new IntersectionObserver(t=>{t.forEach(t=>{t.isIntersecting&&(this.loadMedia(t.target),e.unobserve(t.target))})},this.observerConfig);this.lazyMediaElements.forEach(t=>{e.observe(t)})}loadAllMedia(){this.lazyMediaElements.forEach(e=>{this.loadMedia(e)})}loadMedia(e){"VIDEO"===e.tagName?this.loadVideo(e):"IMG"!==e.tagName&&"PICTURE"!==e.tagName||this.loadImage(e)}loadVideo(e){const t=e.dataset.src;t&&(e.src=t,e.load(),e.hasAttribute("autoplay")&&setTimeout(()=>{const t=e.play();void 0!==t&&t.catch(e=>{console.warn("Video autoplay failed:",e)})},100),e.addEventListener("error",handleMediaError),this.cleanupElement(e))}loadImage(e){const t=e.dataset.src,i=e.dataset.srcset;t&&(e.src=t),i&&(e.srcset=i),e.addEventListener("load",()=>{e.classList.add("loaded")}),e.addEventListener("error",handleMediaError),this.cleanupElement(e)}cleanupElement(e){e.classList.remove("lazy-loading"),delete e.dataset.src,delete e.dataset.srcset}}function setupInteractions(){setupHeroLogoInteraction();const e=document.querySelectorAll(".service-card");e.length>0&&e.forEach(e=>{e.addEventListener("mouseenter",handleServiceCardHover),e.addEventListener("mouseleave",handleServiceCardHover)}),setupHeroVideo()}function setupHeroLogoInteraction(){const e=document.querySelector(".hero-logo"),t=document.querySelector(".mc-logo-hero"),i=document.querySelector(".hidden-heading"),n=document.querySelector(".hero-logo-container");e&&t&&i&&n&&(t.addEventListener("focus",()=>{n.classList.add("focused"),o()}),t.addEventListener("blur",()=>{n.classList.remove("focused"),s()}),t.addEventListener("touchstart",()=>{n.classList.contains("focused")?(n.classList.remove("focused"),s()):(n.classList.add("focused"),o())}));function o(){t.style.filter="brightness(0) invert(1)",t.style.opacity="0",t.style.transform="scale(0.8)",i.style.opacity="1",i.style.visibility="visible";const e=document.querySelector(".video-bg"),n=document.querySelector(".cover-image");e&&n&&(e.style.opacity="1",n.style.opacity="0",e.dataset.src&&!e.src&&(e.src=e.dataset.src,e.load(),e.addEventListener("canplay",()=>{const t=e.play();void 0!==t&&t.catch(e=>{console.warn("Video playback failed:",e)})}),e.addEventListener("error",handleMediaError)))}function s(){t.style.filter="",t.style.opacity="",t.style.transform="",i.style.opacity="",i.style.visibility="";const e=document.querySelector(".video-bg"),n=document.querySelector(".cover-image");e&&n&&(e.style.opacity="0",n.style.opacity="1")}}function handleServiceCardHover(e){const t="mouseenter"===e.type,i=e.currentTarget;t?(i.style.transform="translateY(-5px)",i.style.boxShadow="0 8px 32px rgba(0, 0, 0, 0.15)",i.style.borderColor="var(--accent-color)"):(i.style.transform="",i.style.boxShadow="",i.style.borderColor="")}function setupHeroVideo(){const e=document.querySelector(".video-container");if(!e)return;const t=e.querySelector(".video-bg"),i=e.querySelector(".cover-image");t&&i&&(e.addEventListener("mouseenter",()=>{t.paused&&t.dataset.src&&!t.src&&(t.src=t.dataset.src,t.load()),t.style.opacity="1",i.style.opacity="0";const e=t.play();void 0!==e&&e.catch(e=>{console.warn("Video playback failed:",e)})}),e.addEventListener("mouseleave",()=>{t.style.opacity="0",i.style.opacity="1",t.pause()}))}class SkillBarsAnimation{constructor(){this.skillBars=document.querySelectorAll(".skill-progress-bar"),this.observer=null}init(){0!==this.skillBars.length&&(this.skillBars.forEach(e=>{const t=e.getAttribute("data-progress")||"0";e.style.width="0%",e.setAttribute("aria-valuenow","0"),e.setAttribute("aria-valuemax",t)}),this.observer=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(this.animateBar(e.target),this.observer.unobserve(e.target))})},{threshold:.1,rootMargin:"0px 0px -100px 0px"}),this.skillBars.forEach(e=>{this.observer.observe(e)}))}animateBar(e){const t=e.getAttribute("data-progress")||"0",i=parseInt(t,10);setTimeout(()=>{e.style.width=`${i}%`,e.setAttribute("aria-valuenow",i)},100)}}class TimelineAnimation{constructor(){this.timelineItems=document.querySelectorAll(".timeline-item"),this.observer=null}init(){0!==this.timelineItems.length&&(this.timelineItems.forEach(e=>{e.classList.add("hidden"),e.style.opacity="0",e.style.transform="translateY(20px)"}),this.observer=new IntersectionObserver(e=>{e.forEach((e,t)=>{e.isIntersecting&&(setTimeout(()=>{this.animateItem(e.target)},150*t),this.observer.unobserve(e.target))})},{threshold:.1,rootMargin:"0px 0px -50px 0px"}),this.timelineItems.forEach(e=>{this.observer.observe(e)}))}animateItem(e){e.classList.remove("hidden"),e.style.opacity="1",e.style.transform="translateY(0)",e.style.transition="opacity 0.5s ease, transform 0.5s ease"}}function updateActiveNavigation(){const e=document.querySelectorAll("section[id]");if(0===e.length)return;const t=document.querySelectorAll(".nav-links a");0!==t.length&&window.addEventListener("scroll",()=>{let i="";const n=window.scrollY+100;e.forEach(e=>{const t=e.offsetTop,o=e.offsetHeight;n>=t&&n<t+o&&(i=e.getAttribute("id"))}),t.forEach(e=>{e.classList.remove("active");const t=e.getAttribute("href");t&&t.includes(i)&&e.classList.add("active")})})}function setupSmoothScrolling(){document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){const t=this.getAttribute("href").substring(1),i=document.getElementById(t);i&&(e.preventDefault(),window.scrollTo({top:i.offsetTop-100,behavior:"smooth"}),history.pushState(null,null,`#${t}`))})})}function handleMediaError(e){const t=e.target,i=t.tagName.toLowerCase(),n=t.src||t.dataset.src||"unknown";console.warn(`Failed to load ${i}: ${n}`),t.classList.add("media-error"),"img"===i&&(t.alt=t.alt||"Image failed to load",t.style.background="rgba(0, 0, 0, 0.1)"),"video"===i&&t.poster&&(t.removeAttribute("autoplay"),t.load())}
